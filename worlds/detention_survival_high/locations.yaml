main_hallway:
  name: "The Main Hallway"
  atmosphere: |
    The linoleum floor stretches out endlessly, reflecting the orange glow of the late afternoon sun streaming through the trophy case glass. It's unnervingly quiet, save for the hum of the vending machine. The lockers line the walls like silent metal soldiers.
  exits:
    north:
      destination: principal_office
      scene_description: "The ominous door to the Principal's Office, its frosted glass window reading 'PRINCIPAL SKINNER'"
      destination_known: true
    east:
      destination: cafeteria
      scene_description: "Double doors with porthole windows leading to the cafeteria"
      destination_known: true
    west:
      destination: science_lab
      scene_description: "A door marked with a faded 'SCIENCE LAB' sign and a biohazard sticker"
      destination_known: true
    south:
      destination: gymnasium
      scene_description: "The large gymnasium doors with their institutional push-bars"
      destination_known: true
    outside:
      destination: front_gate
      scene_description: "The main entrance doors leading to the locked front gate"
      destination_known: true
  item_placements:
    hall_pass:
      placement: "sits forgotten on a wooden bench beneath the trophy case, its laminated surface catching the afternoon light"
  details:
    trophy_case:
      name: "Trophy Case"
      scene_description: "Full of participation trophies from 1998."
    lockers:
      name: "Lockers"
      scene_description: "Most are locked, but one (number 404) is slightly ajar."

principal_office:
  name: "Principal Skinner's Office"
  atmosphere: |
    The air here smells of stale coffee and bureaucratic dread. A massive mahogany desk dominates the room. Behind it, a portrait of the school mascot (a confused badger) stares judgingly at you.
  exits:
    south:
      destination: main_hallway
      scene_description: "The door back to the main hallway and relative safety"
      destination_known: true
  item_placements:
    rubber_stamp:
      placement: "sits on the mahogany desk beside a towering stack of confiscation forms, its red ink pad still fresh"
  npc_placements:
    principal_skinner:
      placement: "sits behind the massive desk, fingers steepled, peering at you over his reading glasses with barely contained suspicion"
  details:
    desk:
      name: "Mahogany Desk"
      scene_description: "Covered in confiscation forms."
    portrait:
      name: "Mascot Portrait"
      scene_description: "The eyes seem to follow you."

cafeteria:
  name: "The Cafeteria"
  atmosphere: |
    Tables are folded up against the wall. The lingering scent of mystery meat and bleach hangs heavy. Dust motes dance in the light beams hitting the serving station.
  exits:
    west:
      destination: main_hallway
      scene_description: "The double doors leading back to the main hallway"
      destination_known: true
    north:
      destination: kitchen
      scene_description: "A swinging door marked 'STAFF ONLY' leading to the kitchen"
      destination_known: true
  item_placements:
    spatular_sword:
      placement: "leans against the stainless steel serving counter, its industrial size suggesting it has flipped a thousand mystery meat patties"
  npc_placements:
    lunch_lady_doris:
      placement: "stands behind the serving counter with arms crossed, hairnet askew, guarding the kitchen entrance like a gruff sentinel"
  details:
    serving_station:
      name: "Serving Station"
      scene_description: "Currently serving nothing but disappointment."
    floor:
      name: "Cafeteria Floor"
      scene_description: "Sticky. It's always sticky."

science_lab:
  name: "The Science Lab"
  atmosphere: |
    Bunsen burners sit cold on black countertops. A skeleton model in the corner is wearing a tie-dye t-shirt. The periodic table on the wall has several elements spelled wrong.
  exits:
    east:
      destination: main_hallway
      scene_description: "The door back to the main hallway"
      destination_known: true
  item_placements:
    baking_soda:
      placement: "sits on the black countertop next to a collection of beakers, its orange box faded from years of science fair volcanoes"
  npc_placements:
    nerd_neil:
      placement: "crouches behind the teacher's desk, peeking out nervously, his thick glasses catching the fluorescent light"
  details:
    skeleton:
      name: "Skeleton Model"
      scene_description: "His name tag says 'Mr. Bones'."
    blackboard:
      name: "Blackboard"
      scene_description: "Someone has drawn a complex diagram of a spitball trajectory."

gymnasium:
  name: "The Gymnasium"
  atmosphere: |
    The squeak of sneakers is ghosted into the hardwood floor. It smells of sweat and rubber. The bleachers are retracted, creating a cavernous echo whenever you move.
  exits:
    north:
      destination: main_hallway
      scene_description: "The gymnasium doors leading back to the main hallway"
      destination_known: true
    east:
      destination: locker_room
      scene_description: "The entrance to the boys' locker room, emanating a faint Axe body spray cloud"
      destination_known: true
  item_placements:
    dodgeball:
      placement: "sits dead center on the half-court line, as if waiting to deliver childhood trauma to its next victim"
  details:
    hoop:
      name: "Basketball Hoop"
      scene_description: "Just out of reach for a slam dunk."
    bleachers:
      name: "Bleachers"
      scene_description: "Graffiti underneath says 'School Rulez' ironically."

locker_room:
  name: "The Locker Room"
  atmosphere: |
    Damp, dark, and smelling of Axe body spray. A single shower head drips rhythmically: drip... drip... drip. It's the scariest place in the school.
  exits:
    west:
      destination: gymnasium
      scene_description: "The door back to the gymnasium and fresher air"
      destination_known: true
  item_placements:
    janitor_keys:
      placement: "dangle from a hook on locker 13, their massive key ring jangling softly with the building's vibrations"
  details:
    shower:
      name: "Shower"
      scene_description: "It looks like it hasn't been cleaned since the 80s."
    bench:
      name: "Bench"
      scene_description: "A forgotten towel lies here."

kitchen:
  name: "The Kitchen"
  atmosphere: |
    Behind the serving line. Industrial sized mixers and ovens loom like metal giants. It's surprisingly clean, except for a pile of unfinished tater tots.
  exits:
    south:
      destination: cafeteria
      scene_description: "The swinging door back to the cafeteria"
      destination_known: true
  item_placements:
    vinegar:
      placement: "sits on the counter by the industrial sink, its plastic jug half-empty and smelling sharply acidic"
  details:
    freezer:
      name: "Industrial Freezer"
      scene_description: "Locked tight. Probably full of ice cream sandwiches."

front_gate:
  name: "The Front Gate"
  atmosphere: |
    The massive chain-link fence stretches tall, topped with rusty barbed wire that's more for show than security. Beyond it, freedom beckons - the empty parking lot, the distant sound of traffic, the sweet promise of a weekend waiting for you. The padlock on the gate glints in the late afternoon sun.
  exits:
    inside:
      destination: main_hallway
      scene_description: "The main entrance doors leading back into the school"
      destination_known: true
  details:
    gate:
      name: "Front Gate"
      scene_description: "A heavy padlock secures the gate. It looks like it needs a specific key from the janitor's keyring."
    fence:
      name: "Chain-Link Fence"
      scene_description: "Too high to climb, especially with that barbed wire. You'd need to be Spider-Man."
    parking_lot:
      name: "Parking Lot"
      scene_description: "Empty except for Principal Skinner's beige sedan and a lone shopping cart."
  interactions:
    unlock_gate:
      triggers:
        - "use janitor_keys"
        - "unlock gate"
        - "use keys"
        - "open gate"
        - "unlock"
      requires_item: janitor_keys
      narrative_hint: "The gate is locked but one of those keys might fit..."
      sets_flag: escaped
