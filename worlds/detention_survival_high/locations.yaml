main_hallway:
  name: "The Main Hallway"
  atmosphere: |
    The linoleum floor stretches out endlessly, reflecting the orange glow of the late afternoon sun streaming through the trophy case glass. It's unnervingly quiet, save for the hum of the vending machine. The lockers line the walls like silent metal soldiers.
  exits:
    north: principal_office
    east: cafeteria
    west: science_lab
    south: gymnasium
    outside: front_gate
  items:
    - hall_pass
  item_placements:
    hall_pass: "sits forgotten on a wooden bench beneath the trophy case, its laminated surface catching the afternoon light"
  npcs: []
  details:
    trophy_case: "Full of participation trophies from 1998."
    lockers: "Most are locked, but one (number 404) is slightly ajar."

principal_office:
  name: "Principal Skinner's Office"
  atmosphere: |
    The air here smells of stale coffee and bureaucratic dread. A massive mahogany desk dominates the room. Behind it, a portrait of the school mascot (a confused badger) stares judgingly at you.
  exits:
    south: main_hallway
  items:
    - rubber_stamp
  item_placements:
    rubber_stamp: "sits on the mahogany desk beside a towering stack of confiscation forms, its red ink pad still fresh"
  npcs:
    - principal_skinner
  npc_placements:
    principal_skinner: "sits behind the massive desk, fingers steepled, peering at you over his reading glasses with barely contained suspicion"
  details:
    desk: "Covered in confiscation forms."
    portrait: "The eyes seem to follow you."

cafeteria:
  name: "The Cafeteria"
  atmosphere: |
    Tables are folded up against the wall. The lingering scent of mystery meat and bleach hangs heavy. Dust motes dance in the light beams hitting the serving station.
  exits:
    west: main_hallway
    north: kitchen
  items:
    - spatular_sword
  item_placements:
    spatular_sword: "leans against the stainless steel serving counter, its industrial size suggesting it has flipped a thousand mystery meat patties"
  npcs:
    - lunch_lady_doris
  npc_placements:
    lunch_lady_doris: "stands behind the serving counter with arms crossed, hairnet askew, guarding the kitchen entrance like a gruff sentinel"
  details:
    serving_station: "Currently serving nothing but disappointment."
    floor: "Sticky. It's always sticky."

science_lab:
  name: "The Science Lab"
  atmosphere: |
    Bunsen burners sit cold on black countertops. A skeleton model in the corner is wearing a tie-dye t-shirt. The periodic table on the wall has several elements spelled wrong.
  exits:
    east: main_hallway
  items:
    - baking_soda
  item_placements:
    baking_soda: "sits on the black countertop next to a collection of beakers, its orange box faded from years of science fair volcanoes"
  npcs:
    - nerd_neil
  npc_placements:
    nerd_neil: "crouches behind the teacher's desk, peeking out nervously, his thick glasses catching the fluorescent light"
  details:
    skeleton: "His name tag says 'Mr. Bones'."
    blackboard: "Someone has drawn a complex diagram of a spitball trajectory."

gymnasium:
  name: "The Gymnasium"
  atmosphere: |
    The squeak of sneakers is ghosted into the hardwood floor. It smells of sweat and rubber. The bleachers are retracted, creating a cavernous echo whenever you move.
  exits:
    north: main_hallway
    east: locker_room
  items:
    - dodgeball
  item_placements:
    dodgeball: "sits dead center on the half-court line, as if waiting to deliver childhood trauma to its next victim"
  npcs: []
  details:
    hoop: "Just out of reach for a slam dunk."
    bleachers: "Graffiti underneath says 'School Rulez' ironically."

locker_room:
  name: "The Locker Room"
  atmosphere: |
    Damp, dark, and smelling of Axe body spray. A single shower head drips rhythmically: drip... drip... drip. It's the scariest place in the school.
  exits:
    west: gymnasium
  items:
    - janitor_keys
  item_placements:
    janitor_keys: "dangle from a hook on locker 13, their massive key ring jangling softly with the building's vibrations"
  npcs: []
  details:
    shower: "It looks like it hasn't been cleaned since the 80s."
    bench: "A forgotten towel lies here."

kitchen:
  name: "The Kitchen"
  atmosphere: |
    Behind the serving line. Industrial sized mixers and ovens loom like metal giants. It's surprisingly clean, except for a pile of unfinished tater tots.
  exits:
    south: cafeteria
  items:
    - vinegar
  item_placements:
    vinegar: "sits on the counter by the industrial sink, its plastic jug half-empty and smelling sharply acidic"
  npcs: []
  details:
    freezer: "Locked tight. Probably full of ice cream sandwiches."

front_gate:
  name: "The Front Gate"
  atmosphere: |
    The massive chain-link fence stretches tall, topped with rusty barbed wire that's more for show than security. Beyond it, freedom beckons - the empty parking lot, the distant sound of traffic, the sweet promise of a weekend waiting for you. The padlock on the gate glints in the late afternoon sun.
  exits:
    inside: main_hallway
  items: []
  npcs: []
  details:
    gate: "A heavy padlock secures the gate. It looks like it needs a specific key from the janitor's keyring."
    fence: "Too high to climb, especially with that barbed wire. You'd need to be Spider-Man."
    parking_lot: "Empty except for Principal Skinner's beige sedan and a lone shopping cart."
  interactions:
    unlock_gate:
      triggers:
        - "use janitor_keys"
        - "unlock gate"
        - "use keys"
        - "open gate"
        - "unlock"
      requires_item: janitor_keys
      narrative_hint: "The gate is locked but one of those keys might fit..."
      sets_flag: escaped