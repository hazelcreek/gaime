docks_landing:
  name: The Docks
  atmosphere: |
    The smell of salt and questionable fish stew hangs heavy in the air. Seagulls squawk insults from above. To the north, the bustling Town Square awaits. To the east, your own trusty (and rusty) ship, 'The Leaky Tub', is moored.
  exits:
    north:
      destination: town_square
      scene_description: A cobblestone path leading into the noisy heart of Booty Bay
      destination_known: true
    east:
      destination: ships_deck
      scene_description: The gangplank to your ship, creaking ominously with every wave
      destination_known: true
  item_placements:
    sticky_jail_key:
      placement: Deep inside the Grog Barrel (currently invisible).
  npc_placements: {}
  details:
    grog_barrel:
      name: Grog Barrel
      scene_description: A massive barrel labeled 'XXL SPICY GROG - DO NOT TOUCH'. It rumbles slightly.
  interactions:
    scoop_grog:
      triggers:
      - use ladle_infinite on grog_barrel
      narrative_hint: |-
        You scoop out gallons of fiery liquid with the Ladle of Infinite Scooping. At the bottom, sticky and smelling of nutmeg, lies a key!
      sets_flag: grog_scooped
      reveals_item: sticky_jail_key
town_square:
  name: Town Square
  atmosphere: |
    The heart of Booty Bay. Pirates haggle over parrots and peg legs. In the center stands a grand statue of Captain No-Beard McGee, looking heroic and surprisingly clean-shaven.
  exits:
    south:
      destination: docks_landing
      scene_description: The path back to the salty docks
      destination_known: true
    west:
      destination: tavern_entrance
      scene_description: The swinging doors of The Rusty Cutlass Tavern
      destination_known: true
    east:
      destination: brig_entrance
      scene_description: The imposing iron-reinforced door of the Brig
      destination_known: true
    down:
      destination: smugglers_cove_entrance
      scene_description: A dark staircase revealed beneath the statue plinth
      destination_known: true
      hidden: true
      find_condition:
        requires_flag: statue_unlocked
  item_placements: {}
  npc_placements: {}
  details:
    statue:
      name: Captain's Statue
      scene_description: |-
        A stone likeness of the Captain. He stands atop a plinth, one arm raised as if holding a bird. The statue looks incomplete without his famous parrot accessory.
    plinth:
      name: Statue Plinth
      scene_description: The base of the statue. It has a parrot-shaped indentation.
  interactions:
    place_parrot:
      triggers:
      - use ceramic_parrot on statue
      narrative_hint: |-
        You fit the Ceramic Parrot onto No-Beard's shoulder. It clicks into place! The plinth rumbles and slides aside, revealing a dark staircase downwards.
      sets_flag: statue_unlocked
tavern_entrance:
  name: The Rusty Cutlass Tavern
  atmosphere: |
    Raucous laughter and terrible music fill the room. The air is thick with smoke and the smell of spilled ale. Pirates arm-wrestle at sticky tables.
  exits:
    east:
      destination: town_square
      scene_description: The swinging doors leading back to the Town Square
      destination_known: true
    north:
      destination: tavern_backroom
      scene_description: A curtained doorway leading to the private backroom
      destination_known: true
  item_placements:
    ceramic_parrot:
      placement: Clutched in the hand of Bard Barbarossa, who is currently bowing.
    golden_tooth:
      placement: Hidden inside the mouth of the mounted shark head above the bar.
  npc_placements:
    bard_barbarossa:
      placement: Standing on a table, reciting limericks about scurvy.
  details:
    shark_head:
      name: Shark Head
      scene_description: A taxidermied shark with a suspiciously shiny glint in its mouth.
    sign:
      name: Help Wanted Sign
      scene_description: |-
        A 'Help Wanted' sign reads: 'Seeking Cook. Must know difference between sawdust and cumin.'
  interactions:
    slam_poetry:
      triggers:
      - talk bard_barbarossa
      narrative_hint: |-
        You challenge the Bard to an insult slam. You rhyme 'spittoon' with 'baboon'. The crowd goes wild! Barbarossa weeps and hands you his prize trophy.
      sets_flag: won_slam
      reveals_item: ceramic_parrot
    examine_shark:
      triggers:
      - examine shark_head
      narrative_hint: You peer into the shark's maw. Wedged in the back is a solid Golden Tooth!
      reveals_item: golden_tooth
brig_entrance:
  name: The Brig
  atmosphere: |
    A gloomy stone building. The only sound is the dripping of water and the mournful harmonica playing of a prisoner.
  exits:
    west:
      destination: town_square
      scene_description: Sunlight streaming in from the Town Square
      destination_known: true
    in:
      destination: jail_cell
      scene_description: The heavy iron door leading to the dark cells within
      destination_known: true
  item_placements: {}
  npc_placements: {}
  details:
    door:
      name: Jail Door
      scene_description: A heavy iron door with a massive, rusty padlock.
  requires:
    in:
      item: sticky_jail_key
      fail_msg: The door is locked tight. The padlock is rusted shut and sticky with old grog?
jail_cell:
  name: Jail Cell
  atmosphere: |
    Damp, cold, and smelling of regret. Navigator Ned sits on a wooden bench, looking miserable.
  exits:
    out:
      destination: brig_entrance
      scene_description: The iron door leading back to the Brig entrance
      destination_known: true
  item_placements:
    ancient_compass:
      placement: Held tightly by Navigator Ned.
  npc_placements:
    navigator_ned:
      placement: Sitting on the bunk, trying to read a map in the dark.
  details: {}
  interactions:
    free_ned:
      triggers:
      - talk navigator_ned
      narrative_hint: |-
        Ned gasps. 'You opened the door! I'm free! Take this, I won't need it where I'm going (the tavern).' He hands you the Ancient Compass.
      sets_flag: ned_freed
      reveals_item: ancient_compass
ships_deck:
  name: Deck of The Leaky Tub
  atmosphere: |
    The deck of your ship. It's seen better days. Ropes coil like snakes and the main mast stretches up into the blue sky.
  exits:
    west:
      destination: docks_landing
      scene_description: The gangplank leading back to the docks
      destination_known: true
    up:
      destination: crows_nest
      scene_description: A rope ladder leading high up to the Crow's Nest
      destination_known: true
    down:
      destination: galley
      scene_description: A narrow hatch leading down to the Galley
      destination_known: true
  item_placements: {}
  npc_placements: {}
  details:
    rope_line:
      name: Rope Line
      scene_description: |-
        A slack line hangs from the mast, looking like it could form a zipline if tightened from above.
galley:
  name: Ship's Galley
  atmosphere: |
    A cramped kitchen. Dirty dishes are piled high. It smells faintly of sawdust and despair.
  exits:
    up:
      destination: ships_deck
      scene_description: The hatch leading back up to the deck
      destination_known: true
  item_placements:
    ladle_infinite:
      placement: Stuck into a pot of solidified oatmeal.
  npc_placements: {}
  details:
    sack:
      name: Flour Sack
      scene_description: |-
        A sack in the corner labeled 'Premium Flour'. It is ripped open, revealing pure sawdust inside.
crows_nest:
  name: Crow's Nest
  atmosphere: |
    High above the bay. The wind whips your hair. You can see the whole island from here.
  exits:
    down:
      destination: ships_deck
      scene_description: The rope ladder descending to the deck below
      destination_known: true
    zipline:
      destination: ships_deck
      scene_description: A taut zipline ready for a thrilling descent
      destination_known: true
      hidden: true
      find_condition:
        requires_flag: zipline_active
  item_placements:
    rusty_cutlass:
      placement: Embedded in the wooden railing.
  npc_placements:
    weeping_lookout:
      placement: Curled up in a ball, sobbing into his spyglass.
  details:
    counterweight_rope:
      name: Counterweight Rope
      scene_description: |-
        A thick rope holding a heavy counterweight. If cut, it might snap the zipline tight.
  interactions:
    cut_rope:
      triggers:
      - use rusty_cutlass on counterweight_rope
      narrative_hint: |-
        You saw through the rope. SNAP! The counterweight drops, pulling the zipline taut. You can now zip down to the deck instantly!
      sets_flag: zipline_active
    talk_lookout:
      triggers:
      - talk weeping_lookout
      narrative_hint: |-
        The lookout wails, 'I dropped the Jail Key! It fell right into a barrel of Spicy Grog on the docks! I'm doomed!'
smugglers_cove_entrance:
  name: Smuggler's Cove Entrance
  atmosphere: |
    A dark, rocky tunnel revealed beneath the statue. The air is cool and smells of gold and mildew.
  exits:
    up:
      destination: town_square
      scene_description: The stone staircase leading back up to the Town Square
      destination_known: true
    down:
      destination: treasure_cave
      scene_description: A winding, pitch-black tunnel descending into the depths
      destination_known: false
  item_placements: {}
  npc_placements: {}
  details:
    darkness:
      name: Dark Tunnel
      scene_description: The tunnel ahead is pitch black and winding.
  requires:
    down:
      item: ancient_compass
      fail_msg: |-
        You can't navigate the twisting, pitch-black tunnels without an Ancient Compass. You'd get lost instantly.
treasure_cave:
  name: The Treasure Cave
  atmosphere: |
    A massive cavern illuminated by glowing moss. In the center, a pile of gold glitters.
  exits:
    up:
      destination: smugglers_cove_entrance
      scene_description: The winding tunnel leading back up toward the surface
      destination_known: true
  item_placements: {}
  npc_placements: {}
  details:
    chest:
      name: Treasure Chest
      scene_description: The legendary chest of Captain No-Beard.
tavern_backroom:
  name: Tavern Backroom
  atmosphere: |
    A private room for high-stakes card games. It's surprisingly quiet.
  exits:
    south:
      destination: tavern_entrance
      scene_description: The curtained doorway leading back to the main tavern
      destination_known: true
  item_placements: {}
  npc_placements: {}
  details:
    table:
      name: Card Table
      scene_description: A card table covered in green felt.
captains_cabin:
  name: Captain's Cabin
  atmosphere: |
    Located at the stern of the ship (accessed from deck, though door was stuck before). Wait, this is just a narrative flavor room attached to the deck logic.
  exits:
    out:
      destination: ships_deck
      scene_description: The cabin door leading back to the main deck
      destination_known: true
  item_placements: {}
  npc_placements: {}
  details:
    floorboard:
      name: Loose Floorboard
      scene_description: A loose floorboard squeaks under your foot.
  interactions:
    examine_floor:
      triggers:
      - examine floorboard
      narrative_hint: You pry up the board. Underneath is a dusty diary belonging to a Ghost Pirate.
      reveals_item: ghost_diary
zipline_descent:
  name: Mid-Air Zipline
  atmosphere: WHEEEEEEEEEE!
  exits:
    land:
      destination: ships_deck
      scene_description: The deck of your ship rushing up to meet you
      destination_known: true
  item_placements: {}
  npc_placements: {}
  details: {}
